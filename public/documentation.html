<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>auth Documentation</title>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css">

    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <link rel="stylesheet" href="/style.css">
</head>
<body>

<header>
    <div class="inner-header">
        <h1>auth Documentation</h1>
    </div>
</header>

<main class="content">
    <section id="toc">
        <ol>
            <li><a href="#apikeys">API keys</a></li>
            <li><a href="#auth">Register and login</a></li>
            <li><a href="#users">Users</a></li>
            <li><a href="#data">User data</a></li>
        </ol>
    </section>


    <section id="apikeys">
        <h2>API keys</h2>
        <p><a href="/api_key">Request a personal API key.</a></p>

        <p>An API key is required for all requests.</p>

        <p>If an API key is not provided the following error is given:</p>
        <pre class="lager">{
            "errors": {
            "status": 401,
            "source": "/products",
            "title": "Valid API key",
            "detail": "No valid API key provided."
        }
}</pre>
    </section>

    <section id="auth">
        <h2>Register and login</h2>

        <h3>Register</h3>
        <pre class="lager">POST /register</pre>
        <p>Required parameters:</p>
        <pre class="lager">api_key
email
password</pre>
        <p>Result:</p>
        <pre class="lager">{
    "data": {
        "message": "User successfully registered."
    }
}</pre>

        <h3>Login</h3>
        <pre class="lager">POST /login</pre>
        <p>Required parameters:</p>
        <pre class="lager">api_key
email
password</pre>
        <p>Result:</p>
        <pre class="lager">{
    "data": {
        "type": "success",
        "message": "User logged in",
        "user": {
            "api_key": "...",
            "email": "unknown@example.com"
        },
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ey..."
    }
}</pre>
        <p><strong>N.B.</strong> The access token expires after 24 hours.</p>

    </section>

    <section id="users">
        <h2>Users</h2>

        <h3>Get all users</h3>
        <pre class="lager">GET /users?api_key=[API_KEY]</pre>
        <p>Result:</p>
        <pre class="lager">{
    "data": [
        {
            "user_id": 1,
            "email": "test@test.se"
        }
    ]
}</pre>

        <h3>Get specific user</h3>
        <pre class="lager">GET /users/1?api_key=[API_KEY]</pre>
        <p>Result:</p>
        <pre class="lager">{
    "data": {
        "user_id": 1,
        "email": "test@test.se"
    }
}</pre>

    </section>

    <section id="data">
        <h2>User data</h2>

        <p>
            To use the following route, you need a valid JSON Web Token (JWT) set in the HTTP-header.<br />
            The 'x-access-token' header should contain the JWT.
        </p>


        <h3>Get all data for authenticated user</h3>
        <pre class="lager">GET /data?api_key=[API_KEY]</pre>
        <p>Result:</p>
        <pre class="lager">{
    "data": [
        {
            "user_id": 1,
            "email": "test@test.se"
        }
    ]
}</pre>
    </section>
</main>

<footer class="footer">
    <div class="inner-footer">
        <p>&copy; <a href="https://emilfolino.se">Emil Folino</a></p>
        <p>The API is used in a course given in the Webprogrammering Cluster <a href="https://dbwebb.se">dbwebb</a> at <a href="https://bth.se">Blekinge Tekniska HÃ¶gskola</a>.</p>
    </div>
</footer>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

</body>
</html>
